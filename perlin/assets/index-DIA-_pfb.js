var $=Object.defineProperty;var j=(n,t,e)=>t in n?$(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var g=(n,t,e)=>(j(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();class d{constructor(t,e){g(this,"x",0);g(this,"y",0);this.x=t,this.y=e}rotate(t){const e=Math.cos(t),o=Math.sin(t),r=e*this.x-o*this.y,s=o*this.x+e*this.y;return this.x=r,this.y=s,this}add(t){return this.x+=t.x,this.y+=t.y,this}divide(t){return this.x=this.x/t,this.y=this.y/t,this}subtract(t){this.x-=t,this.y-=t}diff(t){return new d(t.x-this.x,t.y-this.y)}angle(){return Math.atan2(this.y,this.x)}multiply(t){return this.x*=t,this.y*=t,this}length(){return Math.sqrt(this.x**2+this.y**2)}getMultiplied(t){return new d(this.x*t,this.y*t)}clampMin(t,e){this.x=Math.max(this.x,t),this.y=Math.max(this.y,e)}clampMax(t,e){this.x=Math.min(this.x,t),this.y=Math.min(this.y,e)}clone(){return new d(this.x,this.y)}normalize(){if(this.length()===0)throw Error("Can't normalize (0,0)");return this.divide(this.length()),this}static dot(t,e){return t.x*e.x+t.y*e.y}}class x{constructor(t){g(this,"perm",[]);g(this,"gradients",[]);g(this,"sampleRandom");this.sampleRandom=t,this.calculatePermutations(),this.calculateGradients()}calculatePermutations(){this.perm=[];for(let t=0;t<256;t++)this.perm[t]=t;for(let t=0;t<256;t++){const e=Math.floor(Math.random()*255),o=this.perm[t];this.perm[t]=this.perm[e],this.perm[e]=o}}reseed(){this.calculatePermutations()}calculateGradients(){this.gradients=[];for(let t=0;t<256;t++){const e=this.sampleRandom()*2*Math.PI,o=new d(Math.cos(e),Math.sin(e)).normalize();this.gradients[t]=o}}drop(t){return t=Math.abs(t),1-t*t*t*(t*(t*6-15)+10)}q(t,e){return this.drop(t)*this.drop(e)}noise(t,e){const o=new d(Math.floor(t),Math.floor(e));let r=0,s=[new d(0,0),new d(0,1),new d(1,0),new d(1,1)];for(const i of s){const a=o.clone().add(i),m=new d(t-a.x,e-a.y);let c=this.perm[a.x%this.perm.length];c=this.perm[(c+a.y)%this.perm.length];const l=this.gradients[c%this.gradients.length];r+=this.q(m.x,m.y)*d.dot(l,m)}return Math.max(Math.min(r,1),-1)}}function v(){let n=Math.random();for(;n===0;)n=Math.random();return n}function I(){let n=v(),t=v();return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*t)}function z(n=0,t=1){return n+t*I()}function H(n){const t=Math.exp(-n);let e=0,o=1;do e++,o*=I();while(o>t);return Math.min(e-1,1)}const w={sampleNormal:z,samplePoisson:H};class C{generateNoiseMap(t,e,o,r,s){const i=[];let a=s.map(c=>1/0),m=s.map(c=>-1/0);for(let c=0;c<o;c++){for(let l=0;l<e;l++)for(let h=0;h<t;h++){if(!i[l]){i[l]=[];for(let u=0;u<t;u++)i[l][u]=s.map(O=>0)}for(let u=0;u<s.length;u++){const R=s[u].noise(l*r/t,h*r/e);i[l][h][u]+=R,a[u]=Math.min(a[u],i[l][h][u]),m[u]=Math.max(m[u],i[l][h][u])}}r=r*2}for(let c=0;c<e;c++)for(let l=0;l<t;l++)for(let h=0;h<s.length;h++)i[c][l][h]=(i[c][l][h]-a[h])/(m[h]-a[h]);return i}getNormalNoiseMap(t,e,o,r,s=1){const i=[];for(let a=0;a<s;a++)i.push(new x(()=>w.sampleNormal(10,100)));return this.generateNoiseMap(t,e,o,r,i)}getPoissonNoiseMap(t,e,o,r,s=1){const i=[];for(let a=0;a<s;a++)i.push(new x(()=>w.samplePoisson(10)));return this.generateNoiseMap(t,e,o,r,i)}}const F=new C,y=document.querySelector("#canvas");if(!y)throw Error();const T=y.width,A=y.height,N=y.getContext("2d");let P=255,q=255,L=255,E=1,b=1,S=1,M=200;const B=document.querySelector("#red-input"),D=document.querySelector("#green-input"),K=document.querySelector("#blue-input"),W=document.querySelector("#alpha-input"),Z=document.querySelector("#freq-input"),J=document.querySelector("#octave-input"),Q=document.querySelector("#resolution-input");function f(n){const t=n.target;return Number(t.value)}B.addEventListener("change",n=>{P=f(n),p()});K.addEventListener("change",n=>{L=f(n),p()});D.addEventListener("change",n=>{q=f(n),p()});W.addEventListener("change",n=>{E=f(n),p()});Z.addEventListener("change",n=>{b=f(n),p()});J.addEventListener("change",n=>{S=f(n),p()});Q.addEventListener("change",n=>{M=f(n),p()});function p(){const n=F.getNormalNoiseMap(M,M,S,b,4),t=T/M,e=A/M;y.width=y.width;for(let o=0;o<n.length;o++){const r=n[o];for(let s=0;s<r.length;s++){const[i,a,m,c]=r[s];N.fillStyle=`rgba(${i*P}, ${a*q}, ${m*L}, ${c*E})`,N.fillRect(o*t,s*e,t,e)}}}p();
